models:
  - name: sessions
    description: Order overview data mart, offering key details for each order inlcluding if it's a customer's first order and a food vs. drink item breakdown. One row per order.

semantic_models:
  - name: sessions
    defaults:
      agg_time_dimension: date
    description: |
      Order fact table. This table is at the order grain with one row per order.
    model: ref('sessions')
    entities:
      - name: date_day
        expr: date
        type: primary
    dimensions:
      - name: date
        expr: date
        type: time
        type_params:
          time_granularity: day
    measures:
      - name: sessions
        description: The total amount for each order including taxes.
        agg: sum

metrics:
  - name: sessions
    description: Sum of total order amonunt. Includes tax + revenue.
    type: simple
    label: Sessions
    type_params:
      measure: sessions
  - name: conversion_rate
    description: Sum of total order amonunt. Includes tax + revenue.
    label: Conversion Rate
    type: ratio
    type_params:
      numerator: order_total
      denominator: sessions